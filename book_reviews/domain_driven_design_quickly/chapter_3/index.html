
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.8">
    
    
      
        <title>Chapter 3 - The Warren</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.39b8e14a.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter-3" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="The Warren" class="md-header-nav__button md-logo" aria-label="The Warren">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            The Warren
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Chapter 3
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Warren" class="md-nav__button md-logo" aria-label="The Warren">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    The Warren
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        Writings
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Writings" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Writings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1" >
      
      <label class="md-nav__link" for="nav-2-1">
        Book Reviews/Discussion
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Book Reviews/Discussion" data-md-level="2">
        <label class="md-nav__title" for="nav-2-1">
          <span class="md-nav__icon md-icon"></span>
          Book Reviews/Discussion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Domain Driven Design Quickly
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../other_musings/" class="md-nav__link">
        Other Musings
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About Me
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#model-driven-design" class="md-nav__link">
    Model Driven Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-building-blocks-of-model-driven-design" class="md-nav__link">
    The Building Blocks of Model Driven Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entities-value-objects-and-services" class="md-nav__link">
    Entities, Value Objects and Services
  </a>
  
    <nav class="md-nav" aria-label="Entities, Value Objects and Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#entities" class="md-nav__link">
    Entities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-objects" class="md-nav__link">
    Value Objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#services" class="md-nav__link">
    Services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="chapter-3">Chapter 3</h1>
<h2 id="model-driven-design">Model Driven Design</h2>
<p>In Chapter 3, the author really dives into the essence of domain driven design. One of the key concepts wrapped up into DDD is the idea of a <em>model</em>. This is an idea that is everpresent where software is written. One approach used to design software is the <a href="https://www.geeksforgeeks.org/analysis-modelling-in-software-engineering/" title="A Geeks for Geeks article about analysis modelling">analysis model</a> approach. The author points out that this very formal approach is typically done by a different set of people, most likely without taking into account the software developers or even software concepts. A common issue as these formal models get translated into software is performance. In order to squeeze higher performance out of software, there is occasionally a need to structure the objects and processes in that software in a certain way to allow things like <a href="https://stackoverflow.com/questions/4844637/what-is-the-difference-between-concurrency-parallelism-and-asynchronous-methods" title="A Stackoverflow post about the difference in these three terms">parallelism, concurrency, or asynchronicity</a>. Other issues pointed out by the author include analyst who</p>
<blockquote>
<p>may have gone into too much detail with some of the components of the model, and have not detailed enough others</p>
</blockquote>
<p>along with discovering details during the development phase that cause models to have to be rearranged or shifted. Another common issue with this approach is the loss of domain knowledge as the model is passed to the developers. Why have the analysts spend a large amount of time with the domain experts crafting the model only to then pass <em>some</em> of that knowledge along? Analysts can be valuable to this process; there should be a focus on developers being a large part of the process too.</p>
<h2 id="the-building-blocks-of-model-driven-design">The Building Blocks of Model Driven Design</h2>
<p>In general most applications have a similar structure, colloquially referred to as a <em>layered architecture</em>. The layers serve as logical dividers from the different purposes of the software, although often some layers will be part of a monolithic whole. However, the author stresses that those layers should include models and processes that are as uncoupled as possible from the other layers and ideas like business logic. A common layered architecture might look like this:</p>
<p><img alt="Screenshot of a typical layered architecture solution. At the top, to the left, the bolded words &quot;User Interface (Presentation Layer)&quot; with the text &quot;Responsible for resenting information to the user and interpreting user commands&quot; to the right. After a dividing line, the bolded words &quot;Application Layer&quot; are to the left with the text &quot;This is a thin layer which coordinates the application activity. It does not contain business logic. It does not hold the state of the business objects, but it can hold the state of an application task progress&quot; to the right. After another dividing line, the bolded words &quot;Domain Layer&quot; to the left with the text &quot;This layer contains information about the domain. This is the heart of the business software. The state of business objects is held here. Persistence of the business objects and possibly their state is delegated to the infrastructure layer&quot; to the right. After another dividing line, the bolded words &quot;Infrastructure Layer&quot; with the text &quot;This layer acts as a supporting library for all the other layers. It provides communication between layers, implements persistence for business objects, contains supporting libraries for the user interface layer, etc&quot; to the right. This is followed by a final dividing line." src="../../../img/DDDQ_Four_Layers.png?raw=true" title="Typical Four Layers of a Software Application" /></p>
<p>While this isn't the place to get into <a href="https://m.signalvnoise.com/the-majestic-monolith/" title="A post by DHH of Rails fame about the 'Majestic Monolith'">monoliths</a> vs <a href="https://martinfowler.com/articles/dont-start-monolith.html" title="A post from Stefan Tilkov on why you should start with microservices... if your goal is microservices">microservices</a>, a layered architecture can be one or the other (or maybe a <a href="https://www.simplethread.com/youre-not-actually-building-microservices/" title="A post about distributed monoliths from">little of... both?</a> That's a bad idea). The main idea here is that if conceptually you divide your layers and use separate models in each one without intertwining them <em>too</em> tightly, you can keep to the idea of a multi-layered architecture in a monolithic app.</p>
<h2 id="entities-value-objects-and-services">Entities, Value Objects and Services</h2>
<h3 id="entities">Entities</h3>
<p>Entities play a central role in domain driven design. A key portion of what makes an object an entity is identity; if we create a person object, that person should have a unique identifier so we can keep track of them throught the operations of the system.</p>
<blockquote>
<p>When an object is distinguished by its identity, rather than its attributes, make this primary to its definition in the model. Keep the class definition simple and focused on life cycle continuity and identity.</p>
</blockquote>
<h3 id="value-objects">Value Objects</h3>
<p>Value Objects are the next pattern that is discussed. One of the most important aspects of a value object is <em><a href="https://web.mit.edu/6.005/www/fa15/classes/09-immutability/" title="A lesson from MIT about mutability and immutability">immutability</a></em>. They should be easy to create and easy to throw away. If a different value is needed, simply create a new object rather than changing the one you have. Value Objects are the workhorse of DDD - they can contain references to Entities, references to other Value Objects, a long list of attributes, or anything in between. The author makes a point, however, to say</p>
<blockquote>
<p>Attributes chosen to make up a Value Object should form a conceptual whole.</p>
</blockquote>
<h3 id="services">Services</h3>
<p>Services typically start as the <em>actions</em> of the domain, or verbs used by the domain experts. Use an object to contain these actions so that they can operate across multiple different Entities and Value Objects. </p>
<blockquote>
<p>For example, to transfer money from one account to another; should that function be in the sending account or the receiving account? </p>
</blockquote>
<p>Ensure that Services are grouped according to function so that they <em>"<a href="https://press.rebus.community/programmingfundamentals/chapter/encapsulation/" title="A short post about encapsulation from Reebus Press">encapsulate</a> a concept"</em>. The author points out that there are three characteristics of a Service</p>
<blockquote>
<ol>
<li>The operation performed by the Service refers to a domain concept which does not naturally belong to an Entity or Value Object.</li>
<li>The operation performed refers to other objects in the domain.</li>
<li>The operation is stateless. </li>
</ol>
</blockquote>
<p>A common mistake is to transpose Services from the domain layer into the infrastructure layer or vice versa. Don't be afraid to put Services in the application layer; where a Service lives is very dependant on the domain and the problem you are solving. The main thrust of this part of the book is to ensure that conceptually all of the aforementioned objects are separated.</p>
<p>Continue on to the next <a href="../chapter_3_part_2/" title="Part 2 of the Chapter 3 review">post about Chapter 3</a>...</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.18f0862e.min.js"></script>
      <script src="../../../assets/javascripts/bundle.994580cf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>